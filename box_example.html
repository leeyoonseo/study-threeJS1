<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset=utf-8>
    <title>three js를 이용한 box 예제</title>
    <style>
      body { margin: 0; }
      canvas { width: 100%; height: 100% }
    </style>
  </head>
  <body>
    <script src="./common/js/three.min.js"></script>
    <script>
      var scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1500 );
      var renderer = new THREE.WebGLRenderer();
      var material, geometry ,mesh;
      var group = new THREE.Object3D();

      camera.position.z = 1500;
      scene.background = new THREE.Color( 0xffffff );
      scene.fog = new THREE.Fog( 0xffffff, 1, 2000 );

      renderer.setSize( window.innerWidth, window.innerHeight );
      document.body.appendChild( renderer.domElement );
      
      // 랜덤 사이즈, 색상
      setRandomSizeBox(group);
      setRandomColor(geometry);

      material = new THREE.MeshBasicMaterial({ 
        color: 0xefefef, 
        transparent: true, 
        wireframe: false, 
        vertexColors: THREE.FaceColors 
      });

      scene.add( group );
      animate();

      /* function */
      function setRandomSizeBox(group){
        for ( var i = 0; i < 1000; i ++ ) {
          var _cubesize = Math.random() * 50 + 5;
          geometry = new THREE.BoxGeometry( _cubesize, _cubesize, _cubesize );
          mesh = new THREE.Mesh( geometry, material );

          mesh.position.x = Math.random() * 1000 - 500;
          mesh.position.y = Math.random() * 1000 - 500;
          mesh.position.z = Math.random() * 1000 - 500;
          group.add( mesh );
        }
      } 

      function setRandomColor(geometry){
        for (var i = 0; i < geometry.faces.length; i++) {
          var face = geometry.faces[i];
          face.color.setHex(Math.random() * 0xffffff);
        }
      }

      function animate(){
        requestAnimationFrame(animate);
        group.rotation.x += 0.003;
        group.rotation.y += 0.002;
        group.rotation.z += 0.001;

        renderer.render(scene, camera);
      }
    </script>
  </body>
</html>